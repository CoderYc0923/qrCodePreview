(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfad17e0"],{"6be2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("div",{staticClass:"top"},[s("span",{staticClass:"top-scan",on:{click:t.jumpToScan}},[s("Icon",{attrs:{name:"scan"}}),t._v(" 扫一扫")],1),s("div",{staticClass:"top-info"},[s("span",{staticClass:"top-info-title"},[t._v("当前扫描到的信息如下")]),s("span",{staticClass:"top-info-value",on:{click:t.test}},[t._v("测试扫描测试扫描")])])]),s("Divider"),s("div",{staticClass:"list-title"},[s("span",{staticClass:"list-title-left"},[t._v("扫描列表")]),s("div",{staticClass:"hot-area",on:{click:t.submit}},[t._m(0)])]),s("card-list",{staticClass:"card-list",attrs:{cardData:t.cardData}})],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"list-title-right"},[t._v(" 提交"),a("img",{staticClass:"right-icon",attrs:{src:s("af8a"),alt:""}})])}];s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}s("7db0"),s("99af"),s("b0c0");var o=s("c995"),c=s("493d"),r=s.n(c),d=s("8058"),l=s.n(d),u=s("c674"),h=s.n(u),m=s("2141"),f=s.n(m),g=(s("1885"),s("eeb2"),s("5448"),s("d738"),function(t,e){if(navigator.geolocation){var s={enableHighAccuracy:!1,maximumAge:3e4,timeout:3e4};navigator.geolocation.getCurrentPosition(t,e,s)}else e("当前环境不支持定位获取")}),C=100,p={"Timeout expired":"获取定位超时","User denied Geolocation":"请允许获取当前定位"},v={name:"List",components:{CardList:o["a"],Icon:r.a,Divider:l.a,Notify:h.a},data:function(){return{cardData:[],state:{instantCode:[],lastTime:void 0,nextTime:void 0,lastCode:"",nextCode:""}}},methods:{submit:function(){var t=this.checkPosition();t?this.submitCardList():this.getPosition()},getScanRemoteData:function(){var t={hashId:"hashId101",innerCode:"innerCode101",model:"model101",serialNumber:"serialNumber101"};this.cardListHandle(t)},cardListHandle:function(t){var e=this.setCardListGuard(t);e&&this.setCardList(t)},setCardListGuard:function(t){return this.cardData.find((function(e){return e.hashId===t.hashId}))?(h()({type:"warning",message:"当前结果已录入，请勿重复录入"}),!1):!(this.cardData.length>=C)||(f()({message:"单次连续扫描最大".concat(C,"个")}),!1)},setCardList:function(t){this.cardData.push(t)},submitCardList:function(){},checkPosition:function(){return!!sessionStorage.getItem("position")||(f()({message:"请先获取定位"}),!1)},getPosition:function(){g(this.getPosSuccess,this.getPosError)},getPosError:function(t){var e="获取定位错误",s="";s="object"===n(t)?p[t.message]?p[t.message]:e:t||e,console.log(t),h()({type:"warning",message:s})},getPosSuccess:function(t){console.log("纬度:".concat(t.coords.latitude,"  经度:").concat(t.coords.longitude));var e={latitude:t.coords.latitude,longitude:t.coords.longitude};sessionStorage.setItem("position",e)},jumpToScan:function(){this.$store.dispatch("changeListCount",this.cardData.length),this.$store.dispatch("clearScanList",[]),this.$router.push({name:"Scan"})},getScanData:function(){var t=this.$store.getters.getScanList;console.log("getScanData",t)},listenScanner:function(t){if(window.event?this.state.nextCode=t.key:t.which&&(this.state.nextCode=t.which),13===t.keyCode){if(this.state.instantCode.length<3)return;return this.parseScanCode(this.state.instantCode),this.state.lastCode="",void(this.state.lastTime="")}this.state.nextTime=(new Date).getTime(),this.state.lastTime||this.state.lastCode||(this.state.instantCode=[],this.state.instantCode.push(t.key)),this.state.lastCode&&this.state.lastTime&&this.state.nextTime-this.state.lastTime>30?(this.state.instantCode=[],this.state.instantCode.push(t.key)):this.state.lastCode&&this.state.lastTime&&this.state.instantCode.push(t.key),this.state.lastCode=this.state.nextCode,this.state.lastTime=this.state.nextTime},parseScanCode:function(t){console.log("result",t)},test:function(){this.getScanRemoteData()}},mounted:function(){var t=this;this.getPosition(),window.onkeydown=function(e){t.listenScanner(e)},this.cardData=[];for(var e=0;e<2;e++){var s={hashId:"hashId".concat(e),innerCode:"innerCode".concat(e),model:"model".concat(e),serialNumber:"serialNumber".concat(e)};this.cardData.push(s)}},beforeMount:function(){sessionStorage.getItem("position")&&sessionStorage.removeItem("position")},beforeDestroy:function(){window.onkeydown=null},beforeRouteEnter:function(t,e,s){s((function(t){"Scan"===e.name&&t.getScanData()}))}},b=v,S=(s("a3e8"),s("2877")),y=Object(S["a"])(b,a,i,!1,null,"09dbd3bc",null);e["default"]=y.exports},a3e8:function(t,e,s){"use strict";s("e2d3")},af8a:function(t,e,s){t.exports=s.p+"img/submit.371494f6.svg"},e2d3:function(t,e,s){}}]);